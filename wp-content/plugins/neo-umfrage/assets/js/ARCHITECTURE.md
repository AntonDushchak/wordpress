# Neo Umfrage - Архитектура JavaScript

## ✅ Исправленная структура

### 1. neo-umfrage.js (Координатор)
**Ответственность:**
- ✅ Инициализация приложения
- ✅ Привязка глобальных событий
- ✅ Координация между модулями
- ✅ Общие утилиты (showMessage)
- ✅ Проверка прав доступа (canEdit, canDelete)
- ✅ Делегирование вызовов специализированным модулям

**Функции:**
- `init()` - инициализация
- `bindEvents()` - привязка событий
- `loadInitialData()` - загрузка начальных данных
- `handleButtonClick()` - обработка кликов по кнопкам
- `showMessage()` - показ сообщений
- `canEdit()` / `canDelete()` - проверка прав
- `viewSurvey()` - делегирование просмотра анкеты
- `editTemplate()` - делегирование редактирования шаблона
- `deleteSurvey()` / `editSurvey()` - делегирование операций с анкетами

### 2. neo-umfrage-modals.js (Модальные окна)
**Ответственность:**
- ✅ Создание модальных окон
- ✅ Обработка отправки форм
- ✅ Управление полями шаблонов
- ✅ Загрузка и отображение полей
- ✅ Рендеринг полей анкет

**Функции:**
- `createModals()` - создание модальных окон
- `handleFormSubmit()` - обработка отправки форм
- `collectFormData()` - сбор данных форм
- `addField()` / `removeField()` / `changeFieldType()` - управление полями
- `loadTemplateFields()` / `renderTemplateFields()` - работа с полями шаблонов
- `renderSurveyField()` - рендеринг полей анкет
- `openAddSurveyModal()` / `openEditSurveyModal()` / `openAddTemplateModal()` - открытие модальных окон
- `closeModal()` - закрытие модальных окон
- `submitTemplateForm()` / `submitSurveyForm()` - отправка форм
- `handleTemplateChange()` - обработка изменения шаблона

### 3. neo-umfrage-surveys.js (Анкеты)
**Ответственность:**
- ✅ Загрузка и отображение анкет
- ✅ Удаление и редактирование анкет
- ✅ Просмотр анкет
- ✅ Фильтрация анкет

**Функции:**
- `loadSurveys()` - загрузка анкет
- `renderSurveysList()` - отображение списка анкет
- `deleteSurvey()` - удаление анкеты
- `editSurvey()` - редактирование анкеты
- `createViewSurveyModal()` - создание модального окна просмотра
- `loadSurveyForEdit()` - загрузка данных для редактирования
- `populateSurveyForm()` - заполнение формы данными
- `loadSurveyData()` / `displaySurveyData()` - загрузка и отображение данных
- `filterSurveys()` - фильтрация анкет

### 4. neo-umfrage-templates.js (Шаблоны)
**Ответственность:**
- ✅ Загрузка и отображение шаблонов
- ✅ Удаление и редактирование шаблонов
- ✅ Работа с полями шаблонов

**Функции:**
- `loadTemplates()` - загрузка шаблонов
- `loadTemplatesForFilter()` - загрузка для фильтра
- `loadTemplatesForSelect()` - загрузка для селекта
- `renderTemplatesList()` - отображение списка шаблонов
- `deleteTemplate()` - удаление шаблона
- `editTemplate()` - редактирование шаблона
- `loadTemplateFieldsForEdit()` - загрузка полей для редактирования
- `renderTemplateFieldsForEdit()` - рендеринг полей для редактирования

### 5. neo-umfrage-statistics.js (Статистика)
**Ответственность:**
- ✅ Загрузка и отображение статистики
- ✅ Отображение последних анкет

**Функции:**
- `loadStatistics()` - загрузка статистики
- `renderStatistics()` - отображение статистики
- `loadRecentSurveys()` - загрузка последних анкет
- `renderRecentSurveys()` - отображение последних анкет

## ✅ Принципы взаимодействия

1. **Dashboard** - главный координатор, делегирует вызовы
2. **Специализированные модули** - содержат логику для своих областей
3. **Безопасные вызовы** - проверка существования модулей
4. **Правильная делегация** - HTML → Dashboard → Специализированные модули

## ✅ Преимущества исправленной структуры

- **Четкое разделение ответственности** - каждая функция в своем модуле
- **Правильная координация** - dashboard делегирует, а не дублирует
- **Легкость поддержки** - изменения в одном модуле не влияют на другие
- **Масштабируемость** - легко добавлять новые функции в нужные модули
- **Тестируемость** - каждый модуль можно тестировать отдельно

## ✅ Порядок загрузки

1. neo-umfrage.js (координатор)
2. neo-umfrage-modals.js
3. neo-umfrage-surveys.js
4. neo-umfrage-templates.js
5. neo-umfrage-statistics.js
